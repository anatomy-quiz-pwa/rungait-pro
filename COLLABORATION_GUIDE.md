# 協作流程指南

## ⚠️ 重要：不會自動同步

**目前是手動同步機制**，不會自動更新彼此的網站功能。需要定期執行同步操作。

## 🔄 同步機制說明

### 當前狀態

- ✅ 已連接兩個 repository
- ✅ 已建立同步腳本 (`sync-partner.sh`)
- ❌ **不會自動同步** - 需要手動執行

### 同步流程

```bash
# 1. 檢查夥伴是否有新更新
./sync-partner.sh

# 2. 如果有更新，手動合併
git merge partner/main

# 3. 解決衝突（如果有）
# 4. 測試
# 5. 推送
git push origin main
```

## ⚠️ 同時修改的影響

### 情況 1：修改不同檔案

**結果**：✅ 通常不會有衝突，可以順利合併

**範例**：
- 你修改：`app/map/page.tsx`
- 夥伴修改：`app/result/page.tsx`
- 結果：可以順利合併

### 情況 2：修改相同檔案

**結果**：⚠️ 會有衝突，需要手動解決

**範例**：
- 你修改：`package.json`（添加新依賴）
- 夥伴修改：`package.json`（修改版本）
- 結果：Git 會標記衝突，需要手動解決

### 情況 3：修改相同功能

**結果**：⚠️ 可能會有邏輯衝突，需要溝通

**範例**：
- 你修改：登入流程
- 夥伴修改：登入流程
- 結果：功能可能衝突，需要討論統一

## 📋 建議的協作流程

### 方案 1：分工明確（推薦）

**原則**：每個人負責不同的功能模組

**分工建議**：
- **你負責**：
  - Map 相關功能
  - Location 註冊
  - Admin 功能
  - 特定頁面

- **夥伴負責**：
  - Result 頁面
  - Chart 功能
  - Upload 功能
  - Job 相關功能

**優點**：
- 減少衝突
- 職責清晰
- 易於維護

### 方案 2：定期同步

**流程**：
1. **每週固定時間同步**（例如：每週一早上）
2. **重大功能完成後同步**
3. **部署前同步**

**執行步驟**：
```bash
# 每週一執行
./sync-partner.sh
```

### 方案 3：功能分支策略

**流程**：
1. 各自在功能分支開發
2. 完成後合併到各自的 main
3. 定期同步彼此的 main

**範例**：
```bash
# 你的工作流程
git checkout -b feature/my-feature
# 開發...
git checkout main
git merge feature/my-feature
git push origin main

# 定期同步夥伴的更新
./sync-partner.sh
```

## 🚨 避免衝突的最佳實踐

### 1. 溝通優先

**在修改前**：
- 告知對方要修改的檔案
- 討論功能變更
- 確認不會衝突

**工具**：
- Slack / Discord
- GitHub Issues
- 共享文檔

### 2. 檔案鎖定（手動）

**建立 `WORKING_FILES.md`**：
```markdown
# 正在修改的檔案

## 你正在修改
- app/map/page.tsx (預計完成時間：2025-12-31)

## 夥伴正在修改
- app/result/page.tsx (預計完成時間：2025-12-30)
```

### 3. 小步快跑

**原則**：
- 頻繁提交小變更
- 避免長時間不同步
- 完成一個功能就同步一次

### 4. 使用 Git 分支

**建議**：
- 各自使用功能分支
- 完成後再合併到 main
- 定期同步 main 分支

## 🔧 衝突解決流程

### 當發生衝突時

1. **不要慌張** - Git 會保留雙方修改
2. **查看衝突**：
   ```bash
   git status
   git diff
   ```
3. **解決衝突**：
   - 手動編輯衝突檔案
   - 保留雙方需要的部分
   - 或選擇其中一個版本
4. **測試**：
   ```bash
   pnpm install
   pnpm run build
   ```
5. **提交**：
   ```bash
   git add .
   git commit -m "resolve: 解決與夥伴的衝突"
   git push
   ```

## 📅 建議的同步時程

### 每日
- 檢查是否有新更新（不一定要合併）

### 每週
- 執行完整同步
- 解決衝突
- 測試功能

### 每月
- 檢查版本對齊
- 清理不需要的檔案
- 優化協作流程

## 🛠️ 自動化選項（進階）

### 選項 1：GitHub Actions（需要權限）

建立自動同步工作流程（需要夥伴 repo 的 access token）

**優點**：
- 自動化
- 定期執行

**缺點**：
- 需要設定權限
- 衝突仍需手動解決

### 選項 2：Cron Job（本地）

設定定時任務自動執行同步腳本

**優點**：
- 本地控制
- 簡單設定

**缺點**：
- 需要電腦常開
- 衝突仍需手動解決

## 📝 協作檢查清單

### 修改前
- [ ] 檢查 `WORKING_FILES.md`（如果有的話）
- [ ] 告知夥伴要修改的檔案
- [ ] 確認不會衝突

### 修改中
- [ ] 頻繁提交小變更
- [ ] 寫清楚的 commit message
- [ ] 不要長時間不同步

### 修改後
- [ ] 測試功能
- [ ] 執行同步
- [ ] 解決衝突（如果有）
- [ ] 推送更新

## 💡 最佳實踐總結

1. **分工明確** - 每個人負責不同模組
2. **定期同步** - 每週至少同步一次
3. **及時溝通** - 修改前告知對方
4. **小步快跑** - 頻繁提交和同步
5. **測試優先** - 同步後立即測試

## 🚀 下一步

1. **建立溝通管道** - 決定使用什麼工具溝通
2. **分工討論** - 明確各自負責的模組
3. **建立同步習慣** - 每週固定時間同步
4. **建立衝突解決流程** - 當衝突發生時知道如何處理

